{% extends 'base.html' %}

{% block title %}Product graph{% endblock %}

{% block head %}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script type="text/javascript">
        google.charts.load("visualization", "1", {packages:["corechart"]});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            info = [['Date', 'product price variation']];

            item_index = 0;
            {% for item in data.date_prices %}
                info.push(['{{item.date}}', {{item.price}}])
            {% endfor %}

            var data = google.visualization.arrayToDataTable(info);

            var options = {
                title: "{{ data.name }}",
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }
    </script>

{% endblock %}

{% block content %}
    <div id="curve_chart" style="width: 1300px; height: 500px"></div>
    <div id="test"></div>
{% endblock %}